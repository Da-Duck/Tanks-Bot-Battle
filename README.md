# –¢–∞–Ω–∫–∏. –ë–∏—Ç–≤–∞ –ë–æ—Ç–æ–≤

–ü—Ä–æ—Å—Ç–∞—è –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∏–≥—Ä–∞ –≤ —Ç–∞–Ω–∫–∏, –≥–¥–µ –±–æ—Ç—ã —Å—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ –ø–æ–ª–µ —Å –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è–º–∏. –†–∞–∑—Ä–∞–±–æ—Ç–∞–π—Ç–µ —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Å—Ä–∞–∂–∞—Ç—å—Å—è —Å –¥—Ä—É–≥–∏–º–∏!

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Python 3.7+
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–≥—Ä—É:
```bash
python tank_game.py
```
3. –í –º–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–µ–∫:
   - –í–∫–ª—é—á–∏—Ç–µ —Å–µ—Ç–µ–≤–æ–π —Ä–µ–∂–∏–º (–≥–∞–ª–æ—á–∫–∞ "–í–∫–ª—é—á–∏—Ç—å —Å–µ—Ç—å")
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–ª—è –∏ –±–æ—Ç–æ–≤
   - –ù–∞–∂–º–∏—Ç–µ "–°–¢–ê–†–¢ –°–ï–†–ò–ò"

## –ö–∞–∫ –Ω–∞–ø–∏—Å–∞—Ç—å —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `my_bot.py` —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:

```python
import socket
import json
import random
import time
import sys


#–∑–∞–¥–∞–µ–º –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
host = "127.0.0.1"
port = 5000

#–µ—Å–ª–∏ —É–∫–∞–∑–∞–ª–∏ –∞–¥—Ä–µ—Å –∏ –ø–æ—Ä—Ç –≤ –∞—Ä–≥—É–º–µ–Ω—Ç–∞—Ö, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏—Ö
if len(sys.argv) >= 3:
    host = sys.argv[1]
    port = int(sys.argv[2])

#—Å–æ–∑–¥–∞–µ–º tcp —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å —Å–µ—Ä–≤–µ—Ä–æ–º –∏–≥—Ä—ã
sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
sock.connect((host, port))

#–ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –ø–æ—Å—Ç—Ä–æ—á–Ω–æ–µ —á—Ç–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ —Å–æ–∫–µ—Ç–∞
text = sock.makefile("r", encoding="utf-8")

#—á–∏—Ç–∞–µ–º –ø–µ—Ä–≤—É—é —Å—Ç—Ä–æ–∫—É —Å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ–º –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
hello = text.readline().strip()

#–ø—ã—Ç–∞–µ–º—Å—è –ø–æ–∫–∞–∑–∞—Ç—å –Ω–æ–º–µ—Ä —Ç–∞–Ω–∫–∞, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å
try:
    hellojson = json.loads(hello)
    tankid = hellojson.get("tank_id")
    if tankid is not None:
        print(f"–º–æ–π —Ç–∞–Ω–∫: {tankid + 1}")
except json.JSONDecodeError:
    print("–Ω–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ—á–∏—Ç–∞—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞")

#–æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –±–æ—Ç–∞
while True:
    #—á–∏—Ç–∞–µ–º –æ—á–µ—Ä–µ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—è –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
    line = text.readline()
    if not line:
        #–µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –∑–∞–∫—Ä—ã–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, –≤—ã—Ö–æ–¥–∏–º
        print("—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ —Å–µ—Ä–≤–µ—Ä–æ–º")
        break

    line = line.strip()
    if not line:
        continue

    try:
        view = json.loads(line)
    except json.JSONDecodeError:
        #–µ—Å–ª–∏ –ø—Ä–∏—à–ª–æ —á—Ç–æ-—Ç–æ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ–µ, –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
        continue

    #–ø—Ä–æ—Å—Ç–∞—è —Å–ª—É—á–∞–π–Ω–∞—è —Ç–∞–∫—Ç–∏–∫–∞:
    #–∏–Ω–æ–≥–¥–∞ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ–º, –∏–Ω–æ–≥–¥–∞ –µ–¥–µ–º, –∏–Ω–æ–≥–¥–∞ —Å—Ç—Ä–µ–ª—è–µ–º
    command = ""

    #—Å –Ω–µ–±–æ–ª—å—à–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –≤ —Å–ª—É—á–∞–π–Ω—É—é —Å—Ç–æ—Ä–æ–Ω—É
    if random.random() < 0.6:
        command += random.choice("lr")

    #—Å –Ω–µ–±–æ–ª—å—à–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é –µ–¥–µ–º –≤–ø–µ—Ä–µ–¥ –∏–ª–∏ –Ω–∞–∑–∞–¥
    if random.random() < 0.8:
        command += random.choice("fb")

    #–µ—Å–ª–∏ –≤–∏–¥–∏–º –≤—Ä–∞–≥–æ–≤, —á–∞—â–µ –∂–º–µ–º –Ω–∞ –≤—ã—Å—Ç—Ä–µ–ª
    enemies = view.get("enemies", [])
    if enemies and random.random() < 0.7:
        command += "s"
    elif random.random() < 0.1:
        command += "s"

    #–µ—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –ø—É—Å—Ç–∞—è, –≤—Å–µ —Ä–∞–≤–Ω–æ –Ω–µ–º–Ω–æ–≥–æ –¥–µ—Ä–Ω–µ–º—Å—è –≤–ø–µ—Ä–µ–¥
    if not command:
        command = "f"

    #—É–ø–∞–∫–æ–≤—ã–≤–∞–µ–º –∫–æ–º–∞–Ω–¥—É –≤ json –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä
    message = json.dumps({"cmd": command})
    try:
        sock.sendall((message + "\n").encode("utf-8"))
    except OSError:
        #–µ—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É, –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –≤—ã—Ö–æ–¥–∏–º
        print("–æ—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–º–∞–Ω–¥—ã, –≤—ã—Ö–æ–¥–∏–º")
        break

    #–¥–µ–ª–∞–µ–º –Ω–µ–±–æ–ª—å—à—É—é –ø–∞—É–∑—É, —á—Ç–æ–±—ã –Ω–µ —Å–ø–∞–º–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
    time.sleep(0.03)

#–∑–∞–∫—Ä—ã–≤–∞–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ —Ñ–∞–π–ª–æ–≤—ã–π –æ–±—ä–µ–∫—Ç
text.close()
sock.close()
```

## –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö FOV

–ö–∞–∂–¥—ã–π —Ç–∏–∫ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ JSON —Å–æ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:

```json
{
  "self": {
    "x": 100,
    "y": 100,
    "angle": 90,
    "health": 3
  },
  "enemies": [
    {
      "id": 1,
      "x": 200,
      "y": 200,
      "angle": 180,
      "health": 2
    }
  ],
  "walls": [[100, 100, 150, 150]],
  "water": [[300, 300, 350, 350]],
  "dest": [[200, 200, 230, 230]],
  "bullets": [{"x": 150, "y": 150}],
  "map_width": 1280,
  "map_height": 720
}
```

- `self` - –≤–∞—à —Ç–∞–Ω–∫
- `enemies` - –∂–∏–≤—ã–µ –≤—Ä–∞–∂–µ—Å–∫–∏–µ —Ç–∞–Ω–∫–∏
- `walls` - –Ω–µ—Ä–∞–∑—Ä—É—à–∞–µ–º—ã–µ —Å—Ç–µ–Ω—ã
- `water` - –≤–æ–¥–∞ (–Ω–µ–ª—å–∑—è –ø—Ä–æ–µ—Ö–∞—Ç—å)
- `dest` - —Ä–∞–∑—Ä—É—à–∞–µ–º—ã–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è
- `bullets` - —Ç–µ–∫—É—â–∏–µ –ø—É–ª–∏ –Ω–∞ –ø–æ–ª–µ

## –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–ö–æ–º–±–∏–Ω–∏—Ä—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã –≤ —Å—Ç—Ä–æ–∫—É (–º–∞–∫—Å–∏–º—É–º 5 —Å–∏–º–≤–æ–ª–æ–≤):

- `l` - –ø–æ–≤–æ—Ä–æ—Ç –≤–ª–µ–≤–æ
- `r` - –ø–æ–≤–æ—Ä–æ—Ç –≤–ø—Ä–∞–≤–æ
- `f` - –¥–≤–∏–∂–µ–Ω–∏–µ –≤–ø–µ—Ä–µ–¥
- `b` - –¥–≤–∏–∂–µ–Ω–∏–µ –Ω–∞–∑–∞–¥
- `s` - –≤—ã—Å—Ç—Ä–µ–ª

–ü—Ä–∏–º–µ—Ä—ã:
- `"s"` - —Ç–æ–ª—å–∫–æ –≤—ã—Å—Ç—Ä–µ–ª
- `"fs"` - –¥–≤–∏–∂–µ–Ω–∏–µ –≤–ø–µ—Ä–µ–¥ + –≤—ã—Å—Ç—Ä–µ–ª
- `"lr"` - –±–µ—Å–ø–æ–ª–µ–∑–Ω–æ (–∫–æ–º–∞–Ω–¥—ã –≤–∑–∞–∏–º–Ω–æ –∏—Å–∫–ª—é—á–∞—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞)

## –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–≥—Ä—É –≤ —Å–µ—Ç–µ–≤–æ–º —Ä–µ–∂–∏–º–µ
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞:
```bash
python my_bot.py
```
3. –î–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –±–æ—Ç–æ–≤ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ —Å–∫—Ä–∏–ø—Ç–æ–≤

–°—á–∞—Å—Ç–ª–∏–≤–æ–π –±–∏—Ç–≤—ã! üéÆüí•
