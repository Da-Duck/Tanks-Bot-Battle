"""
ü§ñ –ü–†–û–°–¢–û–ô –°–õ–£–ß–ê–ô–ù–´–ô –ë–û–¢ - –ü–û–õ–ù–û–°–¢–¨–Æ –ó–ê–ö–û–ú–ú–ï–ù–¢–ò–†–û–í–ê–ù

–≠—Ç–æ –ø—Ä–∏–º–µ—Ä —Å–∞–º–æ–≥–æ –ø—Ä–æ—Å—Ç–æ–≥–æ –±–æ—Ç–∞.
–ö–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥—Ä–æ–±–Ω–æ –æ–±—ä—è—Å–Ω–µ–Ω–∞ –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤.
"""

# –®–ê–ì–ò –î–õ–Ø –ó–ê–ü–£–°–ö–ê:
# 1. –°–∫–∞—á–∞–π—Ç–µ api.py –≤ –ø–∞–ø–∫—É
# 2. –°–æ–∑–¥–∞–π—Ç–µ —ç—Ç–æ—Ç —Ñ–∞–π–ª (random_bot.py) –≤ —Ç–æ–π –∂–µ –ø–∞–ø–∫–µ
# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: python random_bot.py

# ============== –ò–ú–ü–û–†–¢–´ ==============

from api import BotAPI  # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º API –¥–ª—è –±–æ—Ç–æ–≤
import random           # –î–ª—è —Å–ª—É—á–∞–π–Ω—ã—Ö –≤—ã–±–æ—Ä–æ–≤
import math            # –î–ª—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏


# ============== –ö–õ–ê–°–° –ë–û–¢–ê ==============

class RandomBot(BotAPI):
    """
    –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –±–æ—Ç - –¥–µ–ª–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è.
    
    –ù–∞—Å–ª–µ–¥—É–µ–º—Å—è –æ—Ç BotAPI, —á—Ç–æ –¥–∞–µ—Ç –Ω–∞–º:
    - connect() - –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è
    - receive_fov() - –ø–æ–ª—É—á–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    - send_command() - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É
    - run() - –≥–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª
    - distance() - —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —Ç–æ—á–∫–∞–º–∏
    """
    
    def logic(self, fov):
        """
        –≠—Ç–æ –ì–õ–ê–í–ù–´–ô –º–µ—Ç–æ–¥ - –∑–¥–µ—Å—å –í–ê–® –ö–û–î!
        
        fov - —Å–ª–æ–≤–∞—Ä—å (–∫–∞–∫ –≤ JSON) —Å–æ –≤—Å–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∏–≥—Ä–µ:
        {
            'bot': {                    # –≠—Ç–æ –í–´
                'x': 640,              # –í–∞—à–∞ X –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞
                'y': 360,              # –í–∞—à–∞ Y –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞
                'a': 0.5,              # –í–∞—à —É–≥–æ–ª –ø–æ–≤–æ—Ä–æ—Ç–∞ (—Ä–∞–¥–∏–∞–Ω—ã)
                'hp': 3                # –í–∞—à–µ –∑–¥–æ—Ä–æ–≤—å–µ
            },
            'tanks': [                  # –í—Ä–∞–≥–∏ (—Å–ø–∏—Å–æ–∫)
                {
                    'tank_id': 1,
                    'x': 200,
                    'y': 200,
                    'hp': 2,
                    'angle': 1.5
                },
                # ... –µ—â–µ –≤—Ä–∞–≥–∏ –µ—Å–ª–∏ –≤–∏–¥–Ω—ã
            ],
            'walls': [                  # –°—Ç–µ–Ω—ã (–ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è)
                [100, 100, 200, 200],  # x1, y1, x2, y2
                # ...
            ],
            'water': [...],             # –í–æ–¥–∞ (–ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è)
            'dest': [...],              # –†–∞–∑—Ä—É—à–∞–µ–º—ã–µ –æ–±—ä–µ–∫—Ç—ã
            'bullets': [...]            # –ü—É–ª–∏ –≤ –∏–≥—Ä–µ
        }
        
        –ö–û–ú–ê–ù–î–´ –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å:
        "f" - –≤–ø–µ—Ä–µ–¥
        "b" - –Ω–∞–∑–∞–¥
        "l" - –ø–æ–≤–µ—Ä–Ω—É—Ç—å –≤–ª–µ–≤–æ
        "r" - –ø–æ–≤–µ—Ä–Ω—É—Ç—å –≤–ø—Ä–∞–≤–æ
        "s" - –≤—ã—Å—Ç—Ä–µ–ª–∏—Ç—å
        
        –ò—Ö –º–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å: "lfs" = –≤–ª–µ–≤–æ+–≤–ø–µ—Ä–µ–¥+–≤—ã—Å—Ç—Ä–µ–ª
        
        Returns: —Å—Ç—Ä–æ–∫–∞ –∫–æ–º–∞–Ω–¥—ã (–∏–ª–∏ "" –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞—Ç—å)
        """
        
        # –ü–û–õ–£–ß–ò–¢–¨ –î–ê–ù–ù–´–ï –û–ë –ò–ì–†–ï
        me = fov.get('bot', {})                # –ù–∞—à–∏ –¥–∞–Ω–Ω—ã–µ
        enemies = fov.get('tanks', [])         # –í—Ä–∞–≥–∏ –∫–æ—Ç–æ—Ä—ã—Ö –≤–∏–¥–∏–º
        
        # –ü–†–û–°–¢–ê–Ø –õ–û–ì–ò–ö–ê: —Å–ª—É—á–∞–π–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
        
        # –ï—Å–ª–∏ –≤–∏–¥–∏–º –≤—Ä–∞–≥–∞ - 50% —à–∞–Ω—Å –≤—ã—Å—Ç—Ä–µ–ª–∏—Ç—å
        if enemies and random.random() > 0.5:
            print(f"üí• –°—Ç—Ä–µ–ª—è–µ–º! –í—Ä–∞–≥–∏ –≤–∏–¥–Ω—ã: {len(enemies)}")
            return "s"
        
        # –ò–Ω–∞—á–µ - —Å–ª—É—á–∞–π–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ
        actions = [
            "f",     # –í–ø–µ—Ä–µ–¥
            "f",     # –í–ø–µ—Ä–µ–¥ –µ—â–µ —Ä–∞–∑ (–±–æ–ª–µ–µ —á–∞—Å—Ç—ã–π –≤—ã–±–æ—Ä)
            "l",     # –í–ª–µ–≤–æ
            "r",     # –í–ø—Ä–∞–≤–æ
            "",      # –ù–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
        ]
        
        return random.choice(actions)


# ============== –ó–ê–ü–£–°–ö –ë–û–¢–ê ==============

if __name__ == "__main__":
    # –ù–∞—à–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –æ—Ç—Å—é–¥–∞
    
    print("=" * 50)
    print("ü§ñ –°–õ–£–ß–ê–ô–ù–´–ô –ë–û–¢ ü§ñ")
    print("=" * 50)
    
    # –ù–ê–°–¢–†–û–ô–ö–ò
    HOST = 'localhost'  # –ê–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ (localhost = —ç—Ç–∞ –∂–µ –º–∞—à–∏–Ω–∞)
    PORT = 5000         # –ü–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞
    
    # –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–∞ –¥—Ä—É–≥–æ–π –º–∞—à–∏–Ω–µ, –∑–∞–º–µ–Ω–∏—Ç–µ:
    # HOST = '192.168.1.100'  # IP –∞–¥—Ä–µ—Å –¥—Ä—É–≥–æ–π –º–∞—à–∏–Ω—ã
    
    # –°–û–ó–î–ê–¢–¨ –ë–û–¢–ê
    bot = RandomBot(host=HOST, port=PORT)
    
    # –ó–ê–ü–£–°–¢–ò–¢–¨ –ë–û–¢–ê (–±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª)
    bot.run()
    
    # –ü–æ—Å–ª–µ ESC –∏–ª–∏ –æ—à–∏–±–∫–∏ - –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è

    print("\n‚úÖ –ë–æ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω")
